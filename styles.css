* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Baloo 2', cursive;
    text-transform: uppercase;
    /* Giữ tap highlight cho Android 6 - giúp thấy được feedback khi touch */
    -webkit-tap-highlight-color: rgba(202, 22, 28, 0.2);
}

/* HTML & Body - Global Styles */
html {
    width: 100%;
    height: 100%;
    overflow: hidden;
    overflow-x: hidden;
    position: fixed;
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
    -webkit-text-size-adjust: 100%;
    -moz-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    touch-action: manipulation;
}

body {
    overflow-x: hidden;
    -webkit-overflow-scrolling: touch;
    min-height: 100vh;
    min-height: 100dvh;
}

/* Audio Unlock Overlay */
.audio-unlock-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.95);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 99999;
    cursor: pointer;
    animation: fadeIn 0.3s ease-out;
    /* Hỗ trợ touch events trên Android cũ */
    touch-action: manipulation;
    -webkit-user-select: none;
    user-select: none;
}

/* Trạng thái đang load - vẫn cho phép click để hiển thị shake feedback */
.audio-unlock-overlay.loading {
    cursor: wait;
}

.audio-unlock-overlay.loading .audio-unlock-content {
    opacity: 0.7;
    animation: loadingPulse 1.5s ease-in-out infinite;
}

.audio-unlock-overlay.loading .audio-icon {
    animation: loadingRotate 2s linear infinite;
}

/* Trạng thái đã load xong - CHO PHÉP chạm để bắt đầu */
.audio-unlock-overlay.loaded {
    cursor: pointer;
}

.audio-unlock-overlay.loaded .audio-unlock-content {
    animation: pulse 2s ease-in-out infinite;
}

.audio-unlock-overlay.loaded .audio-icon {
    animation: bounce 1s ease-in-out infinite;
}

/* Animation shake khi user cố chạm trước khi load xong */
.audio-unlock-overlay.shake .audio-unlock-content {
    animation: shake 0.5s ease-in-out !important;
}

.audio-unlock-overlay.shake .audio-icon {
    animation: shake 0.5s ease-in-out !important;
}

.audio-unlock-overlay.hidden {
    display: none !important;
    pointer-events: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    z-index: -1 !important;
}

.audio-unlock-content {
    text-align: center;
    color: white;
    animation: pulse 2s ease-in-out infinite;
}

.audio-icon {
    font-size: 80px;
    margin-bottom: 20px;
    animation: bounce 1s ease-in-out infinite;
    display: flex;
    align-items: center;
    justify-content: center;
}

.audio-icon img {
    width: 80px;
    height: 80px;
    object-fit: contain;
}

.audio-unlock-content p {
    font-size: 24px;
    font-weight: 600;
    color: #fff;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
}

/* Animation cho loading state */
@keyframes loadingPulse {
    0%, 100% {
        opacity: 0.7;
        transform: scale(1);
    }
    50% {
        opacity: 0.5;
        transform: scale(0.98);
    }
}

@keyframes loadingRotate {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(360deg);
    }
}

/* Animation shake */
@keyframes shake {
    0%, 100% {
        transform: translateX(0);
    }
    10%, 30%, 50%, 70%, 90% {
        transform: translateX(-10px);
    }
    20%, 40%, 60%, 80% {
        transform: translateX(10px);
    }
}

@keyframes buttonPulse {

    0%,
    100% {
        transform: scale(1);
        box-shadow: 0 8px 20px rgba(202, 22, 28, 0.4);
    }

    50% {
        transform: scale(1.05);
        box-shadow: 0 10px 30px rgba(202, 22, 28, 0.6);
    }
}

@keyframes pulse {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0.7;
    }
}

@keyframes bounce {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-10px);
    }
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

.screen {
    display: none;
    width: 100%;
    height: 100vh;
    height: 100dvh;
    /* Use dynamic viewport height for mobile browsers */
    position: absolute;
    top: 0;
    left: 0;
    animation: fadeIn 0.5s ease-in-out;
    z-index: 1;
    /* Prevent content from overflowing */
    max-width: 100vw;
    max-height: 100vh;
    max-height: 100dvh;
    overflow-x: hidden;
}

.screen.active {
    display: flex;
    justify-content: center;
    align-items: center;
}

/* Survey screen slide animations */
.screen.slide-in-right {
    transform: translateX(100%);
    animation: slideInRight 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
}

.screen.slide-out-left {
    animation: slideOutLeft 0.4s cubic-bezier(0.55, 0.085, 0.68, 0.53) forwards;
}

@keyframes slideInRight {
    from {
        transform: translateX(100%);
    }

    to {
        transform: translateX(0);
    }
}

@keyframes slideOutLeft {
    from {
        transform: translateX(0);
    }

    to {
        transform: translateX(-100%);
    }
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.container {
    background: url('assets/ui/default/settings/bg.png');
    background-size: 100% 100%;
    background-position: center;
    background-repeat: no-repeat;
    position: relative;
    padding-top: 80px;
    padding-bottom: 10px;
    padding-left: 50px;
    padding-right: 50px;


    max-width: 800px;
    min-width: 450px;
    max-height: 600px;
    text-align: center;
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 0;
    z-index: 10;
    animation: containerFloat 3s ease-in-out infinite;
}

@keyframes containerFloat {

    0%,
    100% {
        transform: translateY(0px) scale(1);
    }

    50% {
        transform: translateY(-10px) scale(1.01);
    }
}

.survey-card {
    transform: scale(0.8);
    margin-top: 8%;
    background: url('assets/ui/default/rating/table.png') center/100% 100% no-repeat;
    border-radius: 28px;
    padding: 120px 70px 60px 70px;
    max-width: 800px;
    min-width: 500px;
    max-height: 600px;
    overflow: visible;
    text-align: center;
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 10px;
    z-index: 10;
}

.survey-header {
   max-height: 300px;
    max-width: 90%;
    object-fit: contain;
    position: absolute;
    top: -170px;
    left: 50%;
    transform: translateX(-50%);
}

.logo {
    width: 300px;
}

.logo img {
    width: 100%;
    height: auto;
    display: block;
    margin: -50px auto;
    transition: transform 0.3s ease;
}

.logo img:hover {
    transform: scale(1.05);
}

@keyframes logoGlow {

    0%,
    100% {
        filter: drop-shadow(0 5px 15px rgba(202, 22, 28, 0.3));
    }

    50% {
        filter: drop-shadow(0 8px 25px rgba(202, 22, 28, 0.5));
    }
}

@keyframes bounce {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-10px);
    }
}

.title {
    background: linear-gradient(135deg, #ca161c 0%, #e60012 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-size: 36px;
    margin: 0 0 20px 0;
    padding: 0;
    font-weight: 800;
    letter-spacing: -0.5px;
    animation: titlePulse 2s ease-in-out infinite;
    width: 100%;
    order: 2;
}

@keyframes titlePulse {

    0%,
    100% {
        transform: scale(1);
        opacity: 1;
    }

    50% {
        transform: scale(1.02);
        opacity: 0.9;
    }
}

.subtitle {
    color: #75767a;
    font-size: 22px;
    margin: 0 0 40px 0;
    padding: 0;
    font-weight: 600;
    position: relative;
    display: block;
    width: 100%;
    order: 3;
}

.subtitle::after {
    content: '✈️';
    position: absolute;
    right: 50%;
    transform: translateX(80px);
    animation: planeMove 2s ease-in-out infinite;
}

@keyframes planeMove {

    0%,
    100% {
        transform: translateX(80px) rotate(0deg);
    }

    50% {
        transform: translateX(90px) rotate(10deg);
    }
}

.screen-title {
    color: #509121;
    /* color: #ddd; */
    font-size: 40px;
    margin: 0 0 8px 0;
    font-weight: 900;
}

.intro-text {
    color: #509121;
    font-size: 22px;
    font-weight: 600;
    margin-left: 40px;
    margin-right: 40px;
}

#survey-screen .intro-text {
    margin-left: 0px;
    margin-right: 0px;
    font-size: 36px;
}

.btn {
    padding: 18px 50px;
    border: none;
    border-radius: 50px;
    font-size: 20px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    margin: 15px 0 0 0;
    box-shadow:
        0 8px 25px rgba(202, 22, 28, 0.3),
        0 0 0 3px rgba(202, 22, 28, 0.1);
    position: relative;
    overflow: hidden;
    order: 4;
}

.btn::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
}

.btn:hover::before {
    width: 300px;
    height: 300px;
}

.btn-primary {
    background: linear-gradient(135deg, #ca161c 0%, #e60012 100%);
    color: white;
    animation: buttonGlow 2s ease-in-out infinite;
}

@keyframes buttonGlow {

    0%,
    100% {
        box-shadow:
            0 8px 25px rgba(202, 22, 28, 0.3),
            0 0 0 3px rgba(202, 22, 28, 0.1);
    }

    50% {
        box-shadow:
            0 12px 35px rgba(202, 22, 28, 0.5),
            0 0 0 3px rgba(202, 22, 28, 0.2);
    }
}

.btn-primary:hover {
    transform: translateY(-3px) scale(1.05);
    box-shadow:
        0 15px 40px rgba(202, 22, 28, 0.4),
        0 0 0 3px rgba(202, 22, 28, 0.2);
}

.btn-primary:active {
    transform: scale(0.95);
    box-shadow: 0 5px 15px rgba(202, 22, 28, 0.3);
}

/* Survey Continue Button - Image Only */
.survey-btn-continue {
    background: transparent;
    border: none;
    padding: 0;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-block;
}

.survey-btn-continue img {
    width: 90px;
    height: auto;
    transition: all 0.3s ease;
}

.survey-btn-continue:hover {
    transform: scale(1.05);
}

.survey-btn-continue:hover img {
    filter: drop-shadow(0 8px 20px rgba(0, 0, 0, 0.4));
}

.survey-btn-continue:active {
    transform: scale(0.95);
}

.btn-secondary {
    background: linear-gradient(135deg, #75767a 0%, #5a5b5e 100%);
    color: white;
}

.btn-secondary:hover {
    transform: translateY(-3px) scale(1.05);
    box-shadow:
        0 15px 40px rgba(117, 118, 122, 0.4),
        0 0 0 3px rgba(117, 118, 122, 0.2);
}

.btn-secondary:active {
    transform: scale(0.95);
}

/* Survey styles */
.question-block {
    text-align: left;
}


.question-number {
    color: #509121;
    font-size:48px;
    font-weight: 800;
    margin-bottom: 8px;
    text-transform: uppercase;
    letter-spacing: 0.8px;
}

.question {
    color: #222;
    font-size: 28px;
    font-weight: 700;
    margin-bottom: 14px;
    line-height: 1.3;
}

.option {
    display: flex;
    align-items: center;
    padding: 14px 16px;
    border: 2px solid rgba(0, 0, 0, 0.08);
    border-radius: 14px;
    cursor: pointer;
    margin: 10px 0;
    transition: all 0.2s ease;
    background: rgba(255, 255, 255, 0.96);
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
}

.option:hover {
    border-color: rgba(80, 145, 33, 0.45);
    box-shadow: 0 8px 22px rgba(80, 145, 33, 0.12);
}

.option:active {
    transform: scale(0.98);
}

.option input[type="radio"] {
    appearance: none;
    -webkit-appearance: none;
    width: 22px;
    height: 22px;
    border: 3px solid #bbb;
    border-radius: 50%;
    display: inline-block;
    position: relative;
    margin-right: 12px;
    background: #fff;
    transition: all 0.3s ease;
}

.option input[type="radio"]:hover {
    border-color: #509121;
    box-shadow: 0 0 0 2px rgba(80, 145, 33, 0.2);
}

.option input[type="radio"]:checked {
    border-color: #509121;
    box-shadow: 0 0 0 4px rgba(202, 22, 28, 0.15);
}

.option input[type="radio"]:checked::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 8px;
    height: 8px;
    background: #509121;
    border-radius: 50%;
    transform: translate(-50%, -50%);
}

.option span {
    color: #222;
    font-size: 26px;
    font-weight: 600;
    line-height: 1.2;
}

/* Trạng thái chọn: đổi nền nhẹ cho toàn option */
.option input[type="radio"]:checked+span {
    color: #509121;
}

/* Nút tiếp tục nổi bật, cố định dưới card khi cần */
.survey-card .survey-btn-continue {
    margin-top: 6px;
}


/* Intro box */
.intro-box {
    background: linear-gradient(135deg, #ffe5e7 0%, #fff5f5 100%);
    padding: 25px;
    border-radius: 15px;
    margin: 20px 0;
    border: 2px solid #ca161c;
    box-shadow: 0 5px 20px rgba(202, 22, 28, 0.1);
}

.game-info {
    margin-top: 20px;
}

.info-item {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    margin: 10px 0;
    font-size: 16px;
    color: #333;
}

.info-icon {
    font-size: 24px;
    margin-right: 10px;
}


/* Màn hình khảo sát và kết quả - Ảnh nền đẹp */
#survey-screen,
#win-screen,
#lose-screen,
#rating-screen,
#thank-screen {
    background-image: url('assets/idle_bg.png');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    position: relative;
    overflow-y: auto;
    overflow-x: hidden;
}

.rating-header {
    position: absolute;
    top: -80px;
    left: 50%;
    right: 50%;
    transform: translateX(-50%);
    z-index: 10;
    max-width: 100%;
    height: auto;
    /* Hiển thị trên overlay */
}

.thank-header {
    position: absolute;
    top: -150px;
    left: 50%;
    right: 50%;
    transform: translateX(-50%);
    z-index: 10;
    max-width: 90%;
    height: auto;
    /* Hiển thị trên overlay */
}

.thank-home-btn {
    width: 90px;
    height: auto;
    margin-top: 50px;
    margin-bottom: 50px;
    cursor: pointer;
    transition: all 0.3s ease;
    filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.3));
}

.thank-home-btn:hover {
    transform: translateY(-3px) scale(1.05);
    filter: drop-shadow(0 8px 20px rgba(0, 0, 0, 0.4)) brightness(1.1);
}

.thank-home-btn:active {
    transform: translateY(-1px) scale(0.98);
    filter: drop-shadow(0 3px 10px rgba(0, 0, 0, 0.2));
}

/* Override màu text cho thank-screen */
#thank-screen .screen-title {
    color: #fff;
}

#thank-screen .intro-text {
    color: #fff;
}

.rating-close-btn {
    position: absolute;
    top: -20px;
    right: -15px;
    background: transparent;
    border: none;
    cursor: pointer;
    z-index: 15;
    padding: 8px;
    border-radius: 50%;
    transition: all 0.3s ease;
}

.rating-close-btn:hover {
    background: rgba(0, 0, 0, 0.1);
    transform: scale(1.1);
}

.rating-close-btn:active {
    transform: scale(0.95);
}

.rating-close-btn img {
    width: 56px;
    height: 56px;
}

.rating-sub-text {
    color: #ffffff;
    font-size: 20px;
    font-weight: 600;
    text-align: center;
    margin-top: 70px;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
    z-index: 100;
}

.feedback-area {
    text-align: center;
}

.feedback-textarea {
    width: 100%;
    max-width: 400px;
    height: 100px;
    padding: 15px;
    border: 2px solid #e74c3c;
    border-radius: 15px;
    font-size: 16px;
    font-family: 'Baloo 2', cursive;
    resize: none;
    outline: none;
    background: rgba(255, 255, 255, 0.95);
    color: #333;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
}

.feedback-textarea:focus {
    border-color: black;
    box-shadow: 0 6px 20px rgba(231, 76, 60, 0.3);
    transform: translateY(-2px);
}

.feedback-textarea::placeholder {
    color: #999;
    font-style: italic;
}

.feedback-send-btn {
    margin-top: 20px;
    background: transparent;
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
    padding: 0;
}

.feedback-send-btn:hover {
    transform: scale(1.05);
}

.feedback-send-btn:active {
    transform: scale(0.95);
}

.feedback-send-btn img {
    width: 120px;
    height: auto;
    display: block;
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
}

/* Overlay mờ cho các màn kết quả */
#rating-screen::before,
#lose-screen::before,
#thank-screen::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(5px);
    z-index: 0;
}

/* Màn hướng dẫn - Dùng hình nền giống home với overlay */
#instruction-screen {
    background-image: url('assets/idle_bg.png');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    position: relative;
    overflow-y: auto;
    overflow-x: hidden;
}

/* Overlay mờ cho màn hướng dẫn */
#instruction-screen::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    /* Overlay đen mờ 50% */
    z-index: 0;
    pointer-events: none;
}

/* Game screen */
#game-screen {
    /* background: #f5f5f5; */
    background: #75767a;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
}


/* Countdown Overlay */
.countdown-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(3px);
    -webkit-backdrop-filter: blur(3px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
}

.countdown-overlay.active {
    opacity: 1;
    visibility: visible;
}

.countdown-content {
    text-align: center;
    color: white;
}

.countdown-text {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 30px;
    text-shadow: 0 4px 15px rgba(0, 0, 0, 0.8),
        0 0 30px rgba(202, 22, 28, 0.6);
    -webkit-text-stroke: 1px rgba(0, 0, 0, 0.3);
    animation: fadeInDown 0.5s ease-out;
}

.countdown-number {
    font-size: 120px;
    font-weight: 900;
    text-shadow: 0 6px 25px rgba(0, 0, 0, 0.9),
        0 0 40px rgba(202, 22, 28, 0.8),
        0 0 60px rgba(202, 22, 28, 0.5);
    -webkit-text-stroke: 2px rgba(0, 0, 0, 0.3);
    animation: countdownPulse 1s ease-out;
}

.countdown-number.takeoff {
    font-size: 60px;
    animation: takeoffZoom 1s ease-out;
}

@keyframes fadeInDown {
    0% {
        opacity: 0;
        transform: translateY(-30px);
    }

    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes countdownPulse {
    0% {
        transform: scale(0.3);
        opacity: 0;
    }

    50% {
        transform: scale(1.2);
    }

    100% {
        transform: scale(1);
        opacity: 1;
    }
}

@keyframes takeoffZoom {
    0% {
        transform: scale(1);
        opacity: 1;
    }

    50% {
        transform: scale(1.3);
    }

    100% {
        transform: scale(5);
        opacity: 0;
    }
}

/* ============================================
   CUT-IN ANIMATION - DYNAMIC & PROFESSIONAL
   ============================================ */

.cutin-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    z-index: 2000;
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    overflow: hidden;
}

.cutin-overlay.active {
    opacity: 1;
    visibility: visible;
}

/* Speed Lines Background */
.speed-lines {
    position: absolute;
    width: 100%;
    height: 100%;
    overflow: hidden;
}

.speed-line {
    position: absolute;
    height: 3px;
    background: linear-gradient(90deg,
            transparent 0%,
            rgba(202, 22, 28, 0.8) 50%,
            transparent 100%);
    transform-origin: left center;
    opacity: 0;
}

.speed-line:nth-child(1) {
    top: 20%;
    width: 150%;
    animation: speedLineSlide 0.6s ease-out 0s;
    transform: skewY(-2deg);
}

.speed-line:nth-child(2) {
    top: 35%;
    width: 120%;
    animation: speedLineSlide 0.6s ease-out 0.1s;
    transform: skewY(-3deg);
}

.speed-line:nth-child(3) {
    top: 50%;
    width: 180%;
    animation: speedLineSlide 0.6s ease-out 0.05s;
    transform: skewY(-1deg);
}

.speed-line:nth-child(4) {
    top: 65%;
    width: 140%;
    animation: speedLineSlide 0.6s ease-out 0.15s;
    transform: skewY(-2.5deg);
}

.speed-line:nth-child(5) {
    top: 80%;
    width: 160%;
    animation: speedLineSlide 0.6s ease-out 0.08s;
    transform: skewY(-1.5deg);
}

@keyframes speedLineSlide {
    0% {
        transform: translateX(-100%) skewY(-2deg);
        opacity: 0;
    }

    20% {
        opacity: 1;
    }

    100% {
        transform: translateX(100%) skewY(-2deg);
        opacity: 0;
    }
}

/* Flash Effect - Smoother */
.flash-effect {
    position: absolute;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle,
            rgba(255, 255, 255, 0.4) 0%,
            rgba(202, 22, 28, 0.3) 30%,
            transparent 70%);
    opacity: 0;
    animation: flashBurst 0.6s ease-out;
}

@keyframes flashBurst {
    0% {
        opacity: 0;
        transform: scale(0.8);
    }

    40% {
        opacity: 0.6;
        transform: scale(1.1);
    }

    100% {
        opacity: 0;
        transform: scale(1.5);
    }
}

/* Main Cut-in Image - SMOOTH SLIDE FROM RIGHT */
.cutin-main {
    position: absolute;
    top: 50%;
    right: -100%;
    transform: translateY(-50%) rotate(-10deg);
    opacity: 0;
    z-index: 10;
    width: 100vw;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: cutinSlideIn 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
}

.cutin-main img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    filter: drop-shadow(0 10px 40px rgba(202, 22, 28, 0.6)) drop-shadow(0 0 40px rgba(255, 255, 255, 0.3));
}

@keyframes cutinSlideIn {
    0% {
        right: -100%;
        transform: translateY(-50%) rotate(-10deg);
        opacity: 0;
    }

    100% {
        right: 50%;
        transform: translateY(-50%) translateX(50%) rotate(-5deg);
        opacity: 1;
    }
}

/* Slash Lines - DIAGONAL DECORATION */
.slash-lines {
    position: absolute;
    width: 100%;
    height: 100%;
    pointer-events: none;
}

.slash-line {
    position: absolute;
    background: linear-gradient(135deg,
            transparent 0%,
            rgba(202, 22, 28, 0.9) 50%,
            transparent 100%);
    transform-origin: center;
    opacity: 0;
}

.slash-1 {
    top: 10%;
    left: -20%;
    width: 60%;
    height: 8px;
    transform: rotate(-25deg) scaleX(0);
    animation: slashExpand 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards 0.3s;
}

.slash-2 {
    top: 25%;
    right: -15%;
    width: 50%;
    height: 6px;
    transform: rotate(-20deg) scaleX(0);
    animation: slashExpand 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards 0.4s;
}

.slash-3 {
    bottom: 15%;
    left: 10%;
    width: 70%;
    height: 10px;
    transform: rotate(-30deg) scaleX(0);
    animation: slashExpand 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards 0.35s;
}

@keyframes slashExpand {
    0% {
        transform: rotate(-25deg) scaleX(0);
        opacity: 0;
    }

    50% {
        opacity: 0.4;
    }

    100% {
        transform: rotate(-25deg) scaleX(1);
        opacity: 0.3;
    }
}

/* Particles */
.particles {
    position: absolute;
    width: 100%;
    height: 100%;
    pointer-events: none;
}

.particle {
    position: absolute;
    width: 8px;
    height: 8px;
    background: #ca161c;
    border-radius: 50%;
    opacity: 0;
    box-shadow: 0 0 20px rgba(202, 22, 28, 0.8);
}

.particle.p1 {
    top: 20%;
    left: 30%;
    animation: particleBurst 0.8s ease-out 0.3s;
}

.particle.p2 {
    top: 40%;
    left: 70%;
    animation: particleBurst 0.9s ease-out 0.35s;
}

.particle.p3 {
    top: 60%;
    left: 20%;
    animation: particleBurst 0.7s ease-out 0.4s;
}

.particle.p4 {
    top: 30%;
    left: 80%;
    animation: particleBurst 0.85s ease-out 0.32s;
}

.particle.p5 {
    top: 70%;
    left: 50%;
    animation: particleBurst 0.75s ease-out 0.38s;
}

.particle.p6 {
    top: 50%;
    left: 40%;
    animation: particleBurst 0.95s ease-out 0.36s;
}

@keyframes particleBurst {
    0% {
        transform: translate(0, 0) scale(0);
        opacity: 0;
    }

    20% {
        opacity: 0.6;
    }

    100% {
        transform: translate(calc(var(--dx, 50px) * 1),
                calc(var(--dy, -50px) * 1)) scale(0);
        opacity: 0;
    }
}

.particle.p1 {
    --dx: -60px;
    --dy: -80px;
}

.particle.p2 {
    --dx: 70px;
    --dy: -60px;
}

.particle.p3 {
    --dx: -50px;
    --dy: 70px;
}

.particle.p4 {
    --dx: 80px;
    --dy: 50px;
}

.particle.p5 {
    --dx: 30px;
    --dy: 90px;
}

.particle.p6 {
    --dx: -70px;
    --dy: -40px;
}

/* Cut-in Text - SMOOTH FADE IN */
.cutin-text {
    position: absolute;
    bottom: 15%;
    right: 10%;
    font-size: 60px;
    font-weight: 900;
    color: white;
    text-transform: uppercase;
    transform: rotate(-5deg);
    opacity: 0;
    text-shadow:
        3px 3px 0 #ca161c,
        6px 6px 0 rgba(0, 0, 0, 0.4),
        0 0 30px rgba(202, 22, 28, 0.6);
    -webkit-text-stroke: 2px #ca161c;
    animation: textCutinFade 0.8s ease-out forwards 0.6s;
    letter-spacing: 4px;
    z-index: 15;
}

@keyframes textCutinFade {
    0% {
        transform: rotate(-5deg) translateX(30px);
        opacity: 0;
    }

    100% {
        transform: rotate(-5deg) translateX(0);
        opacity: 1;
    }
}

/* Fade Out Animation */
.cutin-overlay.fadeout {
    animation: cutinFadeOut 0.5s ease-out forwards;
}

@keyframes cutinFadeOut {
    0% {
        opacity: 1;
    }

    100% {
        opacity: 0;
        visibility: hidden;
    }
}


/* Time bonus effect */
.time-bonus-effect {
    position: absolute;
    top: -10px;
    right: 10px;
    font-size: 20px;
    font-weight: 900;
    color: #4CAF50;
    text-shadow: 0 0 10px rgba(76, 175, 80, 0.8);
    animation: timeBonusPop 1s ease-out forwards;
    pointer-events: none;
    z-index: 100;
}

@keyframes timeBonusPop {
    0% {
        transform: scale(0) translateY(0);
        opacity: 0;
    }

    20% {
        transform: scale(1.3) translateY(-5px);
        opacity: 1;
    }

    100% {
        transform: scale(1) translateY(-30px);
        opacity: 0;
    }
}

.score-value.time-bonus-flash {
    animation: timeFlash 0.5s ease-out;
}

@keyframes timeFlash {

    0%,
    100% {
        color: white;
        transform: scale(1);
    }

    50% {
        color: #4CAF50;
        transform: scale(1.3);
        text-shadow: 0 0 20px rgba(76, 175, 80, 1);
    }
}

#game-canvas {
    display: block;
    width: 100vw;
    height: 100vh;
    height: 100dvh;
    /* Use dynamic viewport height for mobile browsers */
    position: fixed;
    /* Fixed để không bị gap */
    top: 0;
    left: 0;
    touch-action: none;
    /* Prevent default touch behavior */
    z-index: 1;
    /* Dưới header */
    margin: 0;
    padding: 0;
}

/* Result screens */
#win-screen .container,
#lose-screen .container {
    padding: 30px 35px;
}

#win-screen .screen-title,
#lose-screen .screen-title {
    margin-bottom: 8px;
}

#win-screen .result-text,
#lose-screen .result-text {
    margin: 5px 0;
}

#win-screen .intro-text,
#lose-screen .intro-text {
    margin: 5px 0 12px 0;
}

#win-screen .btn,
#lose-screen .btn {
    margin-top: 10px;
}

.result-icon {
    font-size: 100px;
    margin-bottom: 12px;
    animation: iconBounce 1s ease-out;
    filter: drop-shadow(0 5px 15px rgba(202, 22, 28, 0.3));
}

.result-icon img {
    display: block;
    margin: 0 auto;
}

@keyframes iconBounce {
    0% {
        transform: scale(0);
        opacity: 0;
    }

    50% {
        transform: scale(1.2);
    }

    100% {
        transform: scale(1);
        opacity: 1;
    }
}

.result-text {
    font-size: 17px;
    color: #333;
    margin: 10px 0;
    font-weight: 600;
    line-height: 1.5;
}

/* QR Code */
.qr-code {
    background: white;
    padding: 15px;
    border-radius: 15px;
    display: block;
    margin: 15px auto;
    max-width: fit-content;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    text-align: center;
}

.qr-code img {
    display: block;
    max-width: 100%;
    height: auto;
    border-radius: 10px;
    margin: 0 auto;
}

.qr-label {
    margin-top: 8px;
    margin-bottom: 3px;
    font-size: 13px;
    color: #75767a;
    text-align: center;
}

.link {
    display: block;
    color: #ca161c;
    text-decoration: none;
    font-size: 13px;
    margin-top: 3px;
    font-weight: 600;
    cursor: pointer;
}

/* Star rating */
.rating-emoji {
    font-size: 80px;
    text-align: center;
    margin: 10px 0;
    min-height: 80px;
    animation: emojiPop 0.3s ease-out;
}

@keyframes emojiPop {
    0% {
        transform: scale(0);
        opacity: 0;
    }

    50% {
        transform: scale(1.2);
    }

    100% {
        transform: scale(1);
        opacity: 1;
    }
}

.star-rating {
    display: flex;
    justify-content: center;
    gap: 15px;
    font-size: 50px;
    margin: 15px 0;
}

.star {
    cursor: pointer;
    color: #ddd;
    transition: all 0.2s ease;
}

.star:hover,
.star.active {
    color: #ffffff;
    transform: scale(1.2);
}

/* Floating decorative planes */
.floating-plane {
    position: absolute;
    font-size: 40px;
    opacity: 0.3;
    z-index: 0;
    pointer-events: none;
}

.plane-1 {
    top: 15%;
    left: 10%;
    animation: floatPlane1 15s ease-in-out infinite;
}

.plane-2 {
    top: 60%;
    right: 15%;
    animation: floatPlane2 12s ease-in-out infinite;
    transform: rotate(45deg);
}

.plane-3 {
    bottom: 20%;
    left: 20%;
    animation: floatPlane3 18s ease-in-out infinite;
    transform: rotate(-30deg);
}

@keyframes floatPlane1 {

    0%,
    100% {
        transform: translate(0, 0) rotate(0deg);
    }

    25% {
        transform: translate(30px, -20px) rotate(10deg);
    }

    50% {
        transform: translate(50px, 10px) rotate(-5deg);
    }

    75% {
        transform: translate(20px, 30px) rotate(15deg);
    }
}

@keyframes floatPlane2 {

    0%,
    100% {
        transform: translate(0, 0) rotate(45deg);
    }

    33% {
        transform: translate(-40px, 30px) rotate(30deg);
    }

    66% {
        transform: translate(-20px, -40px) rotate(60deg);
    }
}

@keyframes floatPlane3 {

    0%,
    100% {
        transform: translate(0, 0) rotate(-30deg);
    }

    50% {
        transform: translate(40px, -50px) rotate(-45deg);
    }
}


/* Help button */
.help-button {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: linear-gradient(135deg, #ca161c 0%, #e60012 100%);
    color: white;
    border: none;
    font-size: 18px;
    font-weight: bold;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 15px rgba(202, 22, 28, 0.3);
    transition: all 0.3s ease;
}

.help-button:hover {
    transform: scale(1.1) rotate(15deg);
    box-shadow: 0 6px 20px rgba(202, 22, 28, 0.5);
}

.help-button:active {
    transform: scale(0.95);
}

/* Modal */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1000;
    animation: fadeIn 0.3s ease-out;
}

.modal.active {
    display: block;
}

.modal-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(5px);
}

.modal-content {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: white;
    border-radius: 25px;
    padding: 35px 30px;
    max-width: 500px;
    width: 90%;
    max-height: 85vh;
    overflow-y: auto;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
    animation: modalSlideIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    z-index: 1001;
}

@keyframes modalSlideIn {
    from {
        transform: translate(-50%, -60%);
        opacity: 0;
        scale: 0.9;
    }

    to {
        transform: translate(-50%, -50%);
        opacity: 1;
        scale: 1;
    }
}

.modal-close {
    position: absolute;
    top: 15px;
    right: 15px;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: #f5f5f5;
    border: none;
    font-size: 28px;
    line-height: 1;
    cursor: pointer;
    color: #75767a;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.modal-close:hover {
    background: #ca161c;
    color: white;
    transform: rotate(90deg);
}

.modal-title {
    font-size: 26px;
    font-weight: 900;
    background: linear-gradient(135deg, #ca161c 0%, #e60012 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin: 0 0 25px 0;
    text-align: center;
}

.rules-section {
    margin-bottom: 25px;
    padding: 20px;
    background: #f8f8f8;
    border-radius: 15px;
    border-left: 4px solid #ca161c;
}

.rules-section.tips {
    background: linear-gradient(135deg, #fff9e6 0%, #fff5f0 100%);
    border-left-color: #FFA500;
}

.rules-heading {
    font-size: 16px;
    font-weight: 800;
    color: #ca161c;
    margin: 0 0 12px 0;
    text-transform: uppercase;
}

.rules-section.tips .rules-heading {
    color: #FFA500;
}

.rules-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.rules-list li {
    padding: 8px 0;
    color: #333;
    font-size: 15px;
    line-height: 1.5;
}

.rules-list li strong {
    color: #ca161c;
    font-weight: 700;
}



/* ========== DIFFICULTY SELECTION ========== */
#difficulty-screen {
    background-image: url('assets/idle_bg.png');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    position: relative;
    overflow: hidden;
    padding: 0;
    /* display: flex; - Đã xóa vì conflict với .screen */
    flex-direction: column;
    height: 100vh;
}

/* Chỉ set display:flex khi active */
#difficulty-screen.active {
    display: flex;
}

/* Confetti particles */
.confetti-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1;
}


/* Header banner */
.difficulty-header {
    position: relative;
    z-index: 10;
    padding: 20px 0;
    text-align: center;
}

.header-banner {
    display: inline-block;
    background: #ca161c;
    padding: 15px 40px;
    border-radius: 25px;
    position: relative;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
}

.header-banner::before,
.header-banner::after {
    content: '';
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 0;
    height: 0;
    border-style: solid;
}

.header-banner::before {
    left: -15px;
    border-width: 15px 15px 15px 0;
    border-color: transparent #ca161c transparent transparent;
}

.header-banner::after {
    right: -15px;
    border-width: 15px 0 15px 15px;
    border-color: transparent transparent transparent #ca161c;
}

.banner-text {
    color: white;
    font-size: 24px;
    font-weight: 900;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    letter-spacing: 2px;
}

/* container hướng dẫn */
.instruction-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    margin-top: 8%;
    max-width: 90%;
    max-height: 75%;
    padding: 30px 20px 60px 20px;
    text-align: center;
    position: relative;
    z-index: 1;
    background: url('assets/ui/default/settings/bg.png');
    background-size: 100% 100%;
    background-position: center;
    background-repeat: no-repeat;
}

.instruction-close-btn {
    position: absolute;
    top: -24px;
    right: -8px;
    background: transparent;
    border: none;
    cursor: pointer;
    z-index: 100;
    width: 56px;
    height: 56px;
}

.instruction-close-btn img {
    width: 56px;
    height: 56px;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
    transition: all 0.3s ease;
}

.instruction-close-btn:hover img {
    transform: scale(1.1);
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.4));
}

.instruction-close-btn:active img {
    transform: scale(0.95);
}

.game-instructions-header {
    position: absolute;
    top: -110px;
    left: 50%;
    right: 50%;
    transform: translateX(-50%);
    z-index: 10;
    max-width: 85%;
    height: auto;
    /* Hiển thị trên overlay */
}

.instructions-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 40px;
    width: 100%;
    max-width: 700px;
    margin: 90px auto 0px auto;
    padding: 30px 30px;
    position: relative;
    z-index: 100;
}

.instruction-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
    position: relative;
    z-index: 1;
    /* Hiển thị trên overlay */
}

.instruction-label {
    font-size: 26px;
    font-weight: 800;
    color: white;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin: 0;
}

.instruction-icon {
    width: 100px;
    height: 100px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0;
}

.instruction-icon img {
    width: 100%;
    height: 100%;
    object-fit: contain;
}

.instruction-text {
    font-size: 18px;
    font-weight: 700;
    color: white;
    margin: 0;
    line-height: 1.4;
}

.btn-play-game-new {
    color: white;
    background: url('assets/ui/default/shop/btn.png') center center no-repeat;
    background-size: 100% 100%;
    font-size: 22px;
    font-weight: 900;
    text-transform: uppercase;
    letter-spacing: 2px;
    padding: 18px 60px;
    border: none;
    border-radius: 50px;
    cursor: pointer;
    transition: all 0.3s ease;
    animation: buttonPulse 2s ease-in-out infinite;
    position: relative;
    overflow: hidden;
    min-width: 180px;
    min-height: 80px;
    z-index: 10;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    margin-bottom: 30px;
}

.btn-play-game-new:hover::before {
    width: 400px;
    height: 400px;
}

.btn-play-game-new span {
    position: relative;
    z-index: 1;
}

.btn-play-game-new:hover {
    transform: translateY(-3px) scale(1.02);
    filter: brightness(0.9);
}

.btn-play-game-new:active {
    transform: translateY(-2px) scale(1);
}

/* Button Start Animation - Hiệu ứng khi bấm nút Start */
.btn-play-game-new.btn-start-animation {
    animation: buttonStartFeedback 1.2s ease-out forwards !important;
    pointer-events: none;
    /* Ngăn click lại trong lúc animation */
}

@keyframes buttonStartFeedback {
    0% {
        transform: scale(1);
        opacity: 1;
        filter: brightness(1) drop-shadow(0 0 0px rgba(255, 255, 255, 0));
    }

    /* Scale up + Glow */
    30% {
        transform: scale(1.15);
        opacity: 1;
        filter: brightness(1.4) drop-shadow(0 0 20px rgba(255, 255, 255, 0.8));
    }

    /* Giữ phát sáng một chút */
    50% {
        transform: scale(1.12);
        opacity: 1;
        filter: brightness(1.5) drop-shadow(0 0 25px rgba(255, 255, 255, 1));
    }

    /* Bắt đầu fade out */
    70% {
        transform: scale(1.08);
        opacity: 0.7;
        filter: brightness(1.3) drop-shadow(0 0 15px rgba(255, 255, 255, 0.6));
    }

    /* Hoàn toàn biến mất */
    100% {
        transform: scale(0.95);
        opacity: 0;
        filter: brightness(0.8) drop-shadow(0 0 0px rgba(255, 255, 255, 0));
    }
}

/* ========== SPLASH SCREEN ========== */
.splash-screen {
    background-image: url('assets/idle_bg.png');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    position: relative;
    overflow: hidden;
}

/* Corner Buttons - Music & Settings */
.corner-btn-container {
    position: absolute;
    z-index: 15;
}

.corner-btn-container.top-right {
    top: 20px;
    right: 20px;
}

.corner-btn-container.bottom-left {
    bottom: 20px;
    left: 20px;
}

.corner-btn {
    background: transparent;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
}

.corner-btn:hover {
    transform: scale(1.05);
}

.corner-btn img {
    width: 56px;
    height: 56px;
}

/* ========== PAUSE POPUP ========== */
.pause-popup {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1000;
    display: none;
    align-items: center;
    justify-content: center;
}

.pause-popup.active {
    display: flex;
}

.pause-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(5px);
}

.pause-panel {
    position: relative;
    display: flex;
    /* Bật chế độ Flexbox */
    justify-content: center;
    /* Căn giữa theo chiều ngang */
    align-items: center;
    /* Căn giữa theo chiều dọc */
    background-image: url('assets/ui/default/settings/bg.png');
    background-repeat: no-repeat;
    background-size: 100% 100%;
    background-position: center;
    min-width: 600px;
    min-height: 400px;
    max-width: 800px;
    max-height: 600px;
    text-align: center;
    border: none;
    padding: 0;
    transform: translateY(0);
    animation: pauseSlideIn 0.3s ease-out;
}

@keyframes pauseSlideIn {
    from {
        transform: translateY(-50px);
        opacity: 0;
    }

    to {
        transform: translateY(0);
        opacity: 1;
    }
}

/* Close Button */
.pause-close-btn {
    position: absolute;
    top: -25px;
    right: -10px;
    width: 56px;
    height: 56px;
    background: transparent;
    border: none;
    cursor: pointer;
    z-index: 1001;
    transition: all 0.3s ease;
    padding: 8px;
    border-radius: 50%;
}

.pause-close-btn:hover {
    background: rgba(0, 0, 0, 0.1);
    transform: scale(1.1);
}

.pause-close-btn:active {
    transform: scale(0.95);
}

.pause-close-btn img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

/* Title Bar */
.pause-title-bar {
    text-align: center;
    position: absolute;
    top: -100px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 100;
}

.pause-title-bar img {
    max-width: 500px;
    height: auto;
}


.pause-row {
    display: flex;
    justify-content: center;
    gap: 25px;
    align-items: center;
    flex-wrap: wrap;
}

.pause-main-btn {
    background: transparent;
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    padding: 15px;
    border-radius: 15px;
    min-width: 120px;
}

.pause-main-btn:hover {
    background: rgba(255, 255, 255, 0.1);
    transform: translateY(-3px);
}

.pause-main-btn:active {
    transform: translateY(0);
}

.pause-main-btn img {
    width: 100px;
    height: 100px;
    object-fit: contain;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

.pause-main-btn span {
    color: white;
    font-size: 18px;
    font-weight: 600;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
    text-align: center;
}

/* ========== LOSE SCREEN ========== */
#lose-screen {
    background-image: url('assets/idle_bg.png');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    position: relative;
    overflow: hidden;
}

#lose-screen::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(5px);
    z-index: 0;
}

.lose-container {
    width: 100%;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    z-index: 1;
}

.lose-close-btn {
    position: absolute;
    top: -20px;
    right: -20px;
    background: transparent;
    border: none;
    cursor: pointer;
    z-index: 15;
    padding: 8px;
    border-radius: 50%;
    transition: all 0.3s ease;
}

.lose-close-btn:hover {
    background: rgba(0, 0, 0, 0.1);
    transform: scale(1.1);
}

.lose-close-btn:active {
    transform: scale(0.95);
}

.lose-close-btn img {
    width: 56px;
    height: 56px;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

.lose-panel {
    margin-top: 8%;
    position: relative;
    background-image: url('assets/ui/default/you_lose/bg.png');
    background-repeat: no-repeat;
    background-size: 100% 100%;
    background-position: center;
    min-width: 320px;
    max-width: 90%;
    width: 600px;
    min-height: 400px;
    max-height: 90vh;
    border: none;
    padding: 0;
    transform: translateY(0);
    animation: loseSlideIn 0.3s ease-out;
}

@keyframes loseSlideIn {
    from {
        transform: translateY(-50px);
        opacity: 0;
    }

    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.lose-header {
    text-align: center;
    position: absolute;
    top: -150px;
    left: 50%;
    transform: translateX(-50%);
    padding: 20px 15px 15px 15px;
}

.lose-header img {
    max-width: 600px;
    height: auto;
}

.lose-content {
    padding: 50px 30px 30px 30px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
}

.lose-icon {
    text-align: center;
}

.lose-icon img {
    width: 100px;
    height: auto;
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
}

.lose-text {
    margin-top: 80px;
    text-align: center;
}

.lose-title {
    color: #ffffff;
    font-size: 30px;
    font-weight: 700;
    margin: 0 0 12px 0;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
    letter-spacing: 0.5px;
    line-height: 1.3;
}

.lose-subtitle {
    color: #ffffff;
    font-size: 22px;
    margin: 0 0 12px 0;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
    line-height: 1.4;
}

.lose-message {
    color: #ffffff;
    font-size: 20px;
    font-weight: 400;
    margin: 0;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
    line-height: 1.5;
    opacity: 0.9;
}


.lose-actions {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
}

.lose-btn {
    background: transparent;
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    padding: 16px 20px;
    border-radius: 15px;
    min-width: 250px;
    min-height: 100px;
    margin-bottom: 20px;
    justify-content: center;
}


.lose-btn:hover {
    transform: translateY(-3px) scale(1.05);
}

.lose-btn:active {
    transform: translateY(0);
}

.lose-btn img {
    width: 100px;
    height: 100px;
    object-fit: contain;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

.lose-btn span {
    color: white;
    font-size: 18px;
    font-weight: 600;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
    text-align: center;
    line-height: 1.2;
}

/* ========== SETTINGS POPUP ========== */
.settings-popup {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1000;
    display: none;
    align-items: center;
    justify-content: center;
}

.settings-popup.active {
    display: flex;
}

.settings-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(5px);
}

.settings-panel {
    position: relative;
    background-image: url('assets/ui/default/settings/bg.png');
    background-repeat: no-repeat;
    background-size: 100% 100%;
    background-position: center;
    min-width: 600px;
    min-height: 400px;
    max-width: 800px;
    max-height: 600px;
    border: none;
    padding: 0;
    transform: translateY(0);
    animation: settingsSlideIn 0.3s ease-out;
}

@keyframes settingsSlideIn {
    from {
        transform: translateY(-50px);
        opacity: 0;
    }

    to {
        transform: translateY(0);
        opacity: 1;
    }
}

/* Close Button */
.settings-close-btn {
    position: absolute;
    top: -25px;
    right: -10px;
    width: 56px;
    height: 56px;
    background: transparent;
    border: none;
    cursor: pointer;
    z-index: 10;
    transition: all 0.3s ease;
}

.settings-close-btn img {
    width: 100%;
    height: 100%;
}

.settings-close-btn:hover {
    transform: scale(1.1);
}

/* Title Bar */
.settings-title-bar {
    border-radius: 15px 15px 0 0;
    padding: 10px 20px;
    text-align: center;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    z-index: 5;
}

.settings-title-bar img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    margin-top: -100px;
}

.settings-title {
    color: white;
    font-size: 16px;
    font-weight: 800;
    margin: 0;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
}

/* Main Buttons */
.settings-main-buttons {
    padding: 60px 20px 20px;
    display: flex;
    flex-direction: column;
    gap: 20px;
    height: 100%;
    width: 100%;
    margin-top: 50px;
    align-items: center;
}

/* Row Layout */
.settings-row {
    display: flex;
    gap: 15px;
    align-items: center;

}

.settings-row-1 {
    flex-direction: row;
    justify-content: center;
    background-color: rgba(0, 0, 0, 0.3);
    padding: 20px;
    border-radius: 16px;
}

.settings-row-2 {
    flex-direction: column;
    justify-content: center;
    gap: 12px;
}

.settings-main-btn {
    background: transparent;
    border: none;
    padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 5px;
    min-width: 80px;
}

/* Ảnh icon của nút */
.settings-main-btn img {
    width: 56px;
    height: 56px;
    cursor: pointer;
    transition: all 0.3s ease;
}

/* Hiệu ứng hover / active */
.settings-main-btn img:hover {
    transform: translateY(-2px) scale(1.05);
}

.settings-main-btn img:active {
    transform: translateY(0) scale(0.95);
    box-shadow:
        0 3px 6px rgba(0, 0, 0, 0.2),
        inset 0 2px 4px rgba(0, 0, 0, 0.2);
}

/* Text bên dưới icon */
.settings-main-btn span {
    color: white;
    font-size: 11px;
    font-weight: 700;
    text-align: center;
    line-height: 1.2;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
}

/* Trạng thái active */
.settings-main-btn.active {
    opacity: 0.7;
    transform: scale(0.95);
}

.settings-main-btn.active:hover {
    transform: translateY(-2px) scale(0.95);
}

.splash-container {
    position: relative;
    z-index: 10;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    text-align: center;
    animation: fadeInSplash 1s ease-out;
    margin-top: -15vh;
}

@keyframes fadeInSplash {
    from {
        opacity: 0;
        transform: scale(0.95);
    }

    to {
        opacity: 1;
        transform: scale(1);
    }
}

.splash-logo {
    animation: logoFloat 3s ease-in-out infinite;
}

.splash-logo img {
    width: 250px;
}

@keyframes logoFloat {

    0%,
    100% {
        transform: translateY(0) scale(1);
    }

    50% {
        transform: translateY(-15px) scale(1.05);
    }
}

.splash-title {
    font-size: 42px;
    font-weight: 900;
    color: white;
    text-transform: uppercase;
    letter-spacing: 2px;
    margin: 0 0 15px 0;
    text-shadow:
        0 3px 10px rgba(0, 0, 0, 0.3),
        0 0 40px rgba(255, 255, 255, 0.2);
    animation: titleGlow 2s ease-in-out infinite;
}

@keyframes titleGlow {

    0%,
    100% {
        text-shadow:
            0 3px 10px rgba(0, 0, 0, 0.3),
            0 0 40px rgba(255, 255, 255, 0.2);
    }

    50% {
        text-shadow:
            0 3px 10px rgba(0, 0, 0, 0.3),
            0 0 60px rgba(255, 255, 255, 0.4);
    }
}

.splash-subtitle {
    font-size: 18px;
    font-weight: 600;
    color: rgba(255, 255, 255, 0.9);
    margin: 0 0 50px 0;
    letter-spacing: 3px;
}

.splash-button {
    color: white;
    background: url('assets/ui/default/shop/btn.png') center center no-repeat;
    background-size: 100% 100%;
    border: none;
    padding: 18px 60px;
    border-radius: 50px;
    font-size: 22px;
    font-weight: 900;
    cursor: pointer;
    transition: all 0.3s ease;
    animation: buttonPulse 2s ease-in-out infinite;
    position: relative;
    overflow: hidden;
    min-width: 200px;
    min-height: 60px;
    z-index: 10;
}


.splash-button span {
    position: relative;
    z-index: 1;
}

.splash-button:hover {
    transform: translateY(-3px) scale(1.02);
    filter: brightness(0.9);
}

.splash-button:active {
    transform: translateY(-2px) scale(1);
}

/* Splash Row Button - 2 nút ngang */
.splash-row-button {
    margin-top: 10px;
    padding: 10px 20px;
    background: transparent;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    position: relative;
    z-index: 10;
}

.splash-row-button img {
    width: 60px;
    height: 60px;
    transition: all 0.3s ease;
    filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.3));
    cursor: pointer;
}

.splash-row-button img:hover {
    transform: translateY(-3px) scale(1.1);
    filter: drop-shadow(0 6px 16px rgba(0, 0, 0, 0.4)) brightness(1.1);
}

.splash-row-button img:active {
    transform: translateY(-1px) scale(0.95);
    filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.2));
}

/* Icon buttons - IMG clickable */
.splash-icon-btn {
    width: 60px;
    height: 60px;
    cursor: pointer;
    transition: all 0.3s ease;
    filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.3));
}

.splash-icon-btn:hover {
    transform: translateY(-3px) scale(1.1);
    filter: drop-shadow(0 6px 16px rgba(0, 0, 0, 0.4)) brightness(1.1);
}

.splash-icon-btn:active {
    transform: translateY(-1px) scale(0.95);
    filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.2));
}

@keyframes buttonPulse {

    0%,
    100% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.03);
    }
}

/* Decorative circles */
.splash-decorations {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
    pointer-events: none;
}

.circle-decoration {
    position: absolute;
    border: 2px solid rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    animation: circleFloat 20s linear infinite;
}

.circle-1 {
    width: 150px;
    height: 150px;
    top: 10%;
    left: 10%;
    animation-duration: 15s;
}

.circle-2 {
    width: 100px;
    height: 100px;
    top: 60%;
    right: 15%;
    animation-duration: 20s;
    animation-delay: -5s;
}

.circle-3 {
    width: 200px;
    height: 200px;
    bottom: 15%;
    left: 15%;
    animation-duration: 18s;
    animation-delay: -10s;
}

.circle-4 {
    width: 80px;
    height: 80px;
    top: 30%;
    right: 25%;
    animation-duration: 12s;
    animation-delay: -3s;
}

@keyframes circleFloat {

    0%,
    100% {
        transform: translate(0, 0) rotate(0deg);
        opacity: 0.3;
    }

    25% {
        transform: translate(20px, -20px) rotate(90deg);
        opacity: 0.5;
    }

    50% {
        transform: translate(0, -40px) rotate(180deg);
        opacity: 0.3;
    }

    75% {
        transform: translate(-20px, -20px) rotate(270deg);
        opacity: 0.5;
    }
}

/* Animated clouds in splash */
.splash-cloud {
    position: absolute;
    opacity: 0.5;
    z-index: 2;
    pointer-events: none;
}

.splash-cloud img {
    width: 100%;
    height: auto;
    filter: drop-shadow(0 2px 8px rgba(255, 255, 255, 0.3));
}

.cloud-1 {
    width: 150px;
    top: 15%;
    left: -150px;
    animation: cloudMove1 25s linear infinite;
}

.cloud-2 {
    width: 180px;
    top: 50%;
    left: -200px;
    animation: cloudMove2 30s linear infinite;
    animation-delay: -10s;
}

.cloud-3 {
    width: 120px;
    top: 75%;
    left: -120px;
    animation: cloudMove3 22s linear infinite;
    animation-delay: -5s;
}

.cloud-4 {
    width: 140px;
    top: 30%;
    left: -140px;
    animation: cloudMove4 28s linear infinite;
    animation-delay: -15s;
}

.cloud-5 {
    width: 100px;
    top: 85%;
    left: -100px;
    animation: cloudMove5 20s linear infinite;
    animation-delay: -8s;
}

@keyframes cloudMove1 {
    0% {
        left: -150px;
    }

    100% {
        left: 110%;
    }
}

@keyframes cloudMove2 {
    0% {
        left: -200px;
    }

    100% {
        left: 110%;
    }
}

@keyframes cloudMove3 {
    0% {
        left: -120px;
    }

    100% {
        left: 110%;
    }
}

@keyframes cloudMove4 {
    0% {
        left: -140px;
    }

    100% {
        left: 110%;
    }
}

@keyframes cloudMove5 {
    0% {
        left: -100px;
    }

    100% {
        left: 110%;
    }
}

/* Animated planes in splash */
.splash-plane {
    position: absolute;
    z-index: 3;
    pointer-events: none;
    filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.3));
}

.splash-plane img {
    width: 100px;
    height: auto;
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
}

.plane-anim-1 {
    top: 20%;
    left: -100px;
    animation: planeFlyStraight1 12s linear infinite;
}

.plane-anim-2 {
    top: 60%;
    left: -100px;
    animation: planeFlyStraight2 15s linear infinite;
    animation-delay: -7s;
}

.plane-anim-3 {
    top: 40%;
    right: -100px;
    transform: scaleX(-1);
    /* Flip để bay ngược chiều */
    animation: planeFlyReverse 18s linear infinite;
    animation-delay: -4s;
}

@keyframes planeFlyStraight1 {
    0% {
        left: -100px;
        transform: translateY(0) rotate(0deg);
    }

    50% {
        transform: translateY(-20px) rotate(5deg);
    }

    100% {
        left: 110%;
        transform: translateY(0) rotate(0deg);
    }
}

@keyframes planeFlyStraight2 {
    0% {
        left: -100px;
        transform: translateY(0) rotate(0deg);
    }

    40% {
        transform: translateY(15px) rotate(-3deg);
    }

    100% {
        left: 110%;
        transform: translateY(0) rotate(0deg);
    }
}

/* Main Menu Layers */
.main-menu-layers {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
}

/* Skyline - Behind building */
.skyline-layer {
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 80%;
    max-width: 900px;
    height: auto;
    z-index: 3;
    display: flex;
    align-items: flex-end;
    justify-content: center;
}

.skyline-layer img {
    width: 100%;
    height: auto;
    object-fit: contain;
    opacity: 0.8;
}

/* Cloud Left */
.cloud-left {
    position: absolute;
    bottom: -4%;
    left: 0;
    z-index: 4;
    width: 40%;
    z-index: 5;
    animation: cloudFloatLeft 4s ease-in-out infinite;
}

.cloud-left img {
    width: 100%;
    height: auto;
}

/* Cloud Right */
.cloud-right {
    position: absolute;
    bottom: -4%;
    right: 0;
    z-index: 5;
    width: 35%;
    animation: cloudFloatRight 4s ease-in-out infinite;
}

.cloud-right img {
    width: 100%;
    height: auto;
}

@keyframes cloudFloatLeft {

    0%,
    100% {
        transform: translateY(0) translateX(0);
    }

    50% {
        transform: translateY(-10px) translateX(-5px);
    }
}

@keyframes cloudFloatRight {

    0%,
    100% {
        transform: translateY(0) translateX(0);
    }

    50% {
        transform: translateY(-10px) translateX(5px);
    }
}

@keyframes planeFlyReverse {
    0% {
        right: -100px;
        transform: scaleX(-1) translateY(0) rotate(0deg);
    }

    60% {
        transform: scaleX(-1) translateY(-15px) rotate(-5deg);
    }

    100% {
        right: 110%;
        transform: scaleX(-1) translateY(0) rotate(0deg);
    }
}

/* Flash Message Styles */
.flash-message {
    position: absolute;
    top: 20px;
    right: 20px;
    background: white;
    color: #333;
    padding: 15px 25px;
    border-radius: 25px;
    font-weight: 600;
    font-size: 16px;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    display: none;
    transition: all 0.3s ease;
    border: 2px solid rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(10px);
    transform: translateX(100%);
}

.flash-message.show {
    display: block;
    opacity: 1;
    visibility: visible;
    transform: translateX(0);
    animation: slideInFromRight 0.5s ease-out;
}

.flash-message span {
    display: flex;
    align-items: center;
    gap: 8px;
}

@keyframes slideInFromRight {
    0% {
        transform: translateX(100%);
        opacity: 0;
    }

    100% {
        transform: translateX(0);
        opacity: 1;
    }
}

/* ========== GAME OVER POPUP ========== */
.game-over-popup {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(5px);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 200;
    opacity: 0;
    transition: opacity 0.3s ease;
    cursor: pointer;
}

.game-over-popup.show {
    display: flex;
    animation: popupFadeIn 0.5s ease-out forwards;
}

@keyframes popupFadeIn {
    0% {
        opacity: 0;
        transform: scale(1.2);
    }

    100% {
        opacity: 1;
        transform: scale(1);
    }
}

.game-over-content {
    text-align: center;
    animation: gameOverShake 0.6s ease-out;
}

@keyframes gameOverShake {

    0%,
    100% {
        transform: translateX(0);
    }

    10%,
    30%,
    50%,
    70%,
    90% {
        transform: translateX(-10px);
    }

    20%,
    40%,
    60%,
    80% {
        transform: translateX(10px);
    }
}

.game-over-icon {
    font-size: 8rem;
    margin-bottom: 20px;
    filter: drop-shadow(0 10px 30px rgba(244, 67, 54, 0.6));
    animation: iconPulse 1s ease-in-out infinite;
}

@keyframes iconPulse {

    0%,
    100% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.1);
    }
}

.game-over-text {
    color: #ff4444;
    font-size: 4rem;
    font-weight: 900;
    letter-spacing: 5px;
    text-shadow:
        0 0 20px rgba(255, 68, 68, 0.8),
        0 0 40px rgba(255, 68, 68, 0.6),
        0 5px 15px rgba(0, 0, 0, 0.5);
    margin: 0 0 20px 0;
    animation: textGlow 1.5s ease-in-out infinite;
}

@keyframes textGlow {

    0%,
    100% {
        text-shadow:
            0 0 20px rgba(255, 68, 68, 0.8),
            0 0 40px rgba(255, 68, 68, 0.6),
            0 5px 15px rgba(0, 0, 0, 0.5);
    }

    50% {
        text-shadow:
            0 0 30px rgba(255, 68, 68, 1),
            0 0 60px rgba(255, 68, 68, 0.8),
            0 5px 15px rgba(0, 0, 0, 0.5);
    }
}

.game-over-score {
    color: white;
    font-size: 1.8rem;
    font-weight: 700;
    margin: 0 0 15px 0;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
}

.game-over-score span {
    color: #ffeb3b;
    font-size: 2rem;
    font-weight: 900;
}

.game-over-hint {
    color: rgba(255, 255, 255, 0.7);
    font-size: 1.1rem;
    font-weight: 500;
    margin: 10px 0 0 0;
    font-style: italic;
    animation: hintBlink 2s ease-in-out infinite;
}

@keyframes hintBlink {

    0%,
    100% {
        opacity: 0.7;
    }

    50% {
        opacity: 1;
    }
}

/* ========================================
   VICTORY SCREEN - MILITARY TECH STYLE
   ======================================== */

#win-screen {
    padding: 20px;
    overflow: hidden;
}

/* Overlay mờ cho màn chiến thắng */
#win-screen::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    /* Overlay đen mờ 50% */
    z-index: 0;
    pointer-events: none;
}

#win-screen.active {
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Victory Container */
.victory-container {
    position: relative;
    max-width: 1000px;
    max-height: 700px;
    padding: 50px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 40px;
    z-index: 10;
}

/* Tech Border Frame */
.tech-border {
    position: absolute;
    top: 20px;
    left: 20px;
    right: 20px;
    bottom: 20px;
    border: 3px solid #ca161c;
    pointer-events: none;
    z-index: 1;
    box-shadow:
        0 0 20px rgba(202, 22, 28, 0.5),
        inset 0 0 20px rgba(202, 22, 28, 0.3);
    animation: borderGlow 2s ease-in-out infinite;
}

@keyframes borderGlow {

    0%,
    100% {
        box-shadow:
            0 0 20px rgba(202, 22, 28, 0.5),
            inset 0 0 20px rgba(202, 22, 28, 0.3);
    }

    50% {
        box-shadow:
            0 0 30px rgba(202, 22, 28, 0.8),
            inset 0 0 30px rgba(202, 22, 28, 0.5);
    }
}

/* Corner Decorations */
.corner-decoration {
    position: absolute;
    width: 40px;
    height: 40px;
    border: 3px solid #ca161c;
}

.corner-decoration.top-left {
    top: -3px;
    left: -3px;
    border-right: none;
    border-bottom: none;
    clip-path: polygon(0 0, 0 100%, 3px 100%, 3px 3px, 100% 3px, 100% 0);
}

.corner-decoration.top-right {
    top: -3px;
    right: -3px;
    border-left: none;
    border-bottom: none;
    clip-path: polygon(0 0, 100% 0, 100% 100%, calc(100% - 3px) 100%, calc(100% - 3px) 3px, 0 3px);
}

.corner-decoration.bottom-left {
    bottom: -3px;
    left: -3px;
    border-right: none;
    border-top: none;
    clip-path: polygon(0 0, 3px 0, 3px calc(100% - 3px), 100% calc(100% - 3px), 100% 100%, 0 100%);
}

.corner-decoration.bottom-right {
    bottom: -3px;
    right: -3px;
    border-left: none;
    border-top: none;
    clip-path: polygon(0 calc(100% - 3px), calc(100% - 3px) calc(100% - 3px), calc(100% - 3px) 0, 100% 0, 100% 100%, 0 100%);
}

/* Side Indicators */
.side-indicators {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.side-indicators.left {
    left: 5px;
}

.side-indicators.right {
    right: 5px;
}

.side-indicators .indicator {
    width: 8px;
    height: 8px;
    background: #ca161c;
    border-radius: 50%;
    box-shadow: 0 0 10px rgba(202, 22, 28, 0.8);
    animation: indicatorBlink 1.5s ease-in-out infinite;
}

.side-indicators .indicator:nth-child(2) {
    animation-delay: 0.2s;
}

.side-indicators .indicator:nth-child(3) {
    animation-delay: 0.4s;
}

.side-indicators .indicator:nth-child(4) {
    animation-delay: 0.6s;
}

.side-indicators .indicator:nth-child(5) {
    animation-delay: 0.8s;
}

.side-indicators .indicator:nth-child(6) {
    animation-delay: 1s;
}

.side-indicators .indicator:nth-child(7) {
    animation-delay: 1.2s;
}

@keyframes indicatorBlink {

    0%,
    100% {
        opacity: 1;
        box-shadow: 0 0 10px rgba(202, 22, 28, 0.8);
    }

    50% {
        opacity: 0.3;
        box-shadow: 0 0 5px rgba(202, 22, 28, 0.4);
    }
}

/* Victory Content Layout */
.victory-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 60px;
    width: 100%;
    height: 100%;
    position: relative;
    z-index: 10;

    /* Khung điện tử đỏ */
    border: 3px solid #ff0000;
    border-radius: 12px;
    padding: 40px;
    background: rgba(0, 0, 0, 0.3);

    /* Viền sáng - hiệu ứng glow đỏ */
    box-shadow:
        0 0 10px rgba(255, 0, 0, 0.5),
        0 0 20px rgba(255, 0, 0, 0.3),
        0 0 30px rgba(255, 0, 0, 0.2),
        inset 0 0 15px rgba(255, 0, 0, 0.1);
}

/* Viền nội bộ - khung điện tử kép */
.victory-content::before {
    content: '';
    position: absolute;
    top: 8px;
    left: 8px;
    right: 8px;
    bottom: 8px;
    border: 2px solid rgba(255, 0, 0, 0.4);
    border-radius: 8px;
    pointer-events: none;
    z-index: -1;
}

/* Góc cắt khung điện tử */
.victory-content::after {
    content: '';
    position: absolute;
    top: -3px;
    left: -3px;
    right: -3px;
    bottom: -3px;
    border-radius: 14px;
    background: linear-gradient(135deg,
            transparent 0%,
            transparent 10%,
            rgba(255, 0, 0, 0.2) 10.5%,
            transparent 11%,
            transparent 89%,
            rgba(255, 0, 0, 0.2) 89.5%,
            transparent 90%);
    pointer-events: none;
    z-index: -2;
}

/* Left Side: Image + Text */
.victory-left {
    flex: 0.65;
    display: flex;
    flex-direction: column;
    gap: 30px;
}

.victory-image {
    position: relative;
    max-width: 100%;
    max-height: 250px;

    border: 2px solid #ca161c;
    border-radius: 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    box-shadow:
        0 10px 30px rgba(0, 0, 0, 0.5),
        inset 0 0 30px rgba(202, 22, 28, 0.3);
}

@keyframes imageFloat {

    0%,
    100% {
        transform: translateY(0) scale(1);
    }

    50% {
        transform: translateY(-10px) scale(1.02);
    }
}

.victory-image img {
    width: 100%;
    height: 100%;
    z-index: 2;
    object-fit: cover;
}

/* Explosion Effect */
.explosion-effect {
    position: absolute;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at center,
            rgba(255, 100, 0, 0.3) 0%,
            rgba(255, 50, 0, 0.2) 30%,
            transparent 70%);
    animation: explosionPulse 2s ease-in-out infinite;
    pointer-events: none;
}

@keyframes explosionPulse {

    0%,
    100% {
        transform: scale(0.8);
        opacity: 0.5;
    }

    50% {
        transform: scale(1.2);
        opacity: 1;
    }
}

/* Victory Text Box */
.victory-text-box {
    width: 100%;
    text-align: left;
    padding: 20px 0;
}

.victory-title {
    font-size: 3rem;
    font-weight: 900;
    color: white;
    text-transform: uppercase;
    letter-spacing: 3px;
    margin: 0 0 15px 0;
    text-shadow:
        0 0 20px rgba(202, 22, 28, 1),
        0 0 40px rgba(202, 22, 28, 0.8),
        0 5px 15px rgba(0, 0, 0, 0.8);
    animation: titleGlowVictory 2s ease-in-out infinite;
    background: linear-gradient(135deg, #fff 0%, #ca161c 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

@keyframes titleGlowVictory {

    0%,
    100% {
        text-shadow:
            0 0 20px rgba(202, 22, 28, 1),
            0 0 40px rgba(202, 22, 28, 0.8),
            0 5px 15px rgba(0, 0, 0, 0.8);
    }

    50% {
        text-shadow:
            0 0 30px rgba(202, 22, 28, 1),
            0 0 60px rgba(202, 22, 28, 1),
            0 5px 20px rgba(0, 0, 0, 0.8);
    }
}

.victory-subtitle {
    font-size: 1rem;
    font-weight: 600;
    color: rgba(255, 255, 255, 0.9);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin: 0;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.8);
    line-height: 1.6;
}

/* Right Side: QR Code */
.victory-right {
    flex: 0.35;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
}

.qr-code-container {
    max-width: 280px;
    max-height: 280px;
    background: white;
    padding: 20px;
    border: 8px solid #ca161c;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow:
        0 10px 40px rgba(0, 0, 0, 0.5),
        0 0 30px rgba(202, 22, 28, 0.6);
}


.qr-code-container img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
}

/* Link text dưới QR code */
.qr-link-text {
    margin-top: 20px;
    text-align: center;
}

.qr-link-text a {
    font-size: 1.1rem;
    font-weight: 600;
    color: #ffffff;
    text-decoration: none;
    letter-spacing: 0.5px;
    text-transform: lowercase;
    transition: all 0.3s ease;
    display: inline-block;
    padding: 8px 16px;
    border-radius: 4px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.qr-link-text a:hover {
    color: #ff0000;
    background: rgba(255, 255, 255, 0.1);
    border-color: #ff0000;
    box-shadow: 0 0 10px rgba(255, 0, 0, 0.3);
}

.victory-link {
    font-size: 1.2rem;
    font-weight: 700;
    color: white;
    text-decoration: none;
    text-transform: lowercase;
    letter-spacing: 1px;
    padding: 12px 20px;

}

/* Continue Button */
.btn-victory-continue {
    background: linear-gradient(135deg, #ca161c 0%, #e60012 100%);
    color: white;
    border: 3px solid rgba(255, 255, 255, 0.3);
    padding: 18px 60px;
    border-radius: 50px;
    font-size: 1.5rem;
    font-weight: 900;
    cursor: pointer;
    text-transform: uppercase;
    letter-spacing: 2px;
    box-shadow:
        0 10px 40px rgba(0, 0, 0, 0.5),
        0 0 30px rgba(202, 22, 28, 0.6);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    z-index: 10;
    animation: buttonPulseVictory 2s ease-in-out infinite;
}

.btn-victory-continue::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
}

.btn-victory-continue:hover::before {
    width: 400px;
    height: 400px;
}

.btn-victory-continue span {
    position: relative;
    z-index: 1;
}

.btn-victory-continue:hover {
    transform: translateY(-5px) scale(1.05);
    box-shadow:
        0 15px 50px rgba(0, 0, 0, 0.6),
        0 0 40px rgba(202, 22, 28, 0.8);
    border-color: rgba(255, 255, 255, 0.6);
}

.btn-victory-continue:active {
    transform: translateY(-2px) scale(1);
}

@keyframes buttonPulseVictory {

    0%,
    100% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.02);
    }
}